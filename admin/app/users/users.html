<ng-include src="'app/users/modal/openAddressModal.html'"></ng-include>
<ng-include src="'app/users/modal/openOrdersModal.html'"></ng-include>
<ng-include src="'app/users/modal/addUserModal.html'"></ng-include>
<legend>Users</legend>

<div class="row">
      <div class="col-md-12">

                            <!-- Begin: life time stats -->
                            <div class="portlet light portlet-fit portlet-datatable bordered">
                                <div class="portlet-title">
									 <button class="btn btn-primary" type="button" ng-click="onAddUser()"> Add Admin User</button>
                                    
                                     <button type="button" class="btn btn-primary" ng-csv="ExportUsers" filename="user.csv" ng-if="ExportUsers.length>0" csv-header="['First Name', 'Last Name', 'Email' ,'Date of Birth','Gender','Email Verified','Role','Phone No','Address','Created On']">Export Users</button>

                                      <button ng-show="removeFilters" class="btn btn-primary" type="button" ng-click="clearFilters()">Clear Filters</button>

                                  <span class="pull-right">
										<div class="row">
                                        <div class="col-sm-8">
                                        <input type="text" ng-model="searchterm" class="form-control" placeholder="Enter search text..." />
                                        </div>
                                        <div class="btn-group btn-group-devided col-sm-2">
                                            <button class="btn btn-primary" type="button" ng-click="onSearch(searchterm)"> Search</button>
                                        </div>
                                        </div>
                                   </span>
                                </div>
                                <div class="portlet-body">
                                    <div class="table-container">
                                        <table class="table table-striped table-bordered table-hover table-checkable" id="datatable_orders">
                                            <thead>
                                                <tr role="row" class="heading">
                                                    <th width="5%">Sr No </th>
                                                    <th width="15%" style="padding-left:8px;text-align:left;cursor:pointer" ng-click="tableSorter('first_name')">First Name <span ng-show="jsonBody.sortBy.attribute == 'first_name'"><span ng-show="jsonBody.sortBy.direction == 'DESC'" class="fa fa-sort-desc"></span><span ng-show="jsonBody.sortBy.direction == 'ASC'" class="fa fa-sort-asc"></span></span></th>
                                                    <th width="15%" style="cursor:pointer" ng-click="tableSorter('last_name')">Last Name <span ng-show="jsonBody.sortBy.attribute == 'last_name'"><span ng-show="jsonBody.sortBy.direction == 'DESC'" class="fa fa-sort-desc"></span><span ng-show="jsonBody.sortBy.direction == 'ASC'" class="fa fa-sort-asc"></span></span></th>
													<th width="15%" style="cursor:pointer" ng-click="tableSorter('email')"> Email <span ng-show="jsonBody.sortBy.attribute == 'email'"><span ng-show="jsonBody.sortBy.direction == 'DESC'" class="fa fa-sort-desc"></span><span ng-show="jsonBody.sortBy.direction == 'ASC'" class="fa fa-sort-asc"></span></span></th>
													<th width="10%" style="cursor:pointer" ng-click="tableSorter('role')"> Role <span ng-show="jsonBody.sortBy.attribute == 'role'"><span ng-show="jsonBody.sortBy.direction == 'DESC'" class="fa fa-sort-desc"></span><span ng-show="jsonBody.sortBy.direction == 'ASC'" class="fa fa-sort-asc"></span></span></th>
                                                    <th width="10%" style="cursor:pointer" ng-click="tableSorter('dob')"> Date Of Birth <span ng-show="jsonBody.sortBy.attribute == 'dob'"><span ng-show="jsonBody.sortBy.direction == 'DESC'" class="fa fa-sort-desc"></span><span ng-show="jsonBody.sortBy.direction == 'ASC'" class="fa fa-sort-asc"></span></span></th>
                                                    <th width="5%"> Addresses </th>
                                                    <th width="5%"> Orders </th>
                                                    <th width="10%"> Mobile </th>

                                                </tr>
                                                <tr role="row" class="filter" ng-repeat = "(key,user) in userData track by $index">
                                                    <td>{{(currentPage-1) * jsonBody.limit + $index  + 1}} </td>
                                                    <td style="padding-left:8px;text-align:left">
                                                        {{user.first_name}}
                                                    </td>
                                                    <td>
                                                        {{user.last_name}}
                                                    </td>
                                                    <td>
                                                        {{user.email}}
                                                    </td>
													<td>
                                                        {{user.role}}
                                                    </td>
                                                    <td>
                                                        {{user.dob | date:'yyyy-MM-dd'}}
                                                    </td>
                                                    <td>
                                                       <a href="" ng-click="onOpenAddresses(user)">view</a>
                                                    </td>
													<td>
                                                       <a href="" ng-click="onOpenOrders(user)">view</a>
                                                    </td>
                                                    <td>
														<p ng-repeat="(key,pno) in user.phone_number track by $index">{{pno}}</p>
                                                    </td>



                                                </tr>

                                            </thead>

                                            <tbody>
                                            <!--  <div class="pull-right">
                                                 <uib-pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize" ng-click="pageChanged()" class="pagination-sm" boundary-link-numbers="true" rotate="false"></uib-pagination>
                                              </div> -->
                                              <div class="pull-right">
                                                <uib-pagination total-items="totalItems" ng-model="currentPage" items-per-page="5" max-size="5" ng-click="onPageClick()" class="pagination-sm" boundary-links="true" rotate="false"></uib-pagination>
                                              </div>
                                            </tbody>
                                        </table>

                                    </div>

                                </div>
                            </div>
                            <!-- End: life time stats -->
                        </div>
                    </div>
